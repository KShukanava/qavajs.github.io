"use strict";(self.webpackChunkqava_docs=self.webpackChunkqava_docs||[]).push([[262],{1250:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var o=t(5893),r=t(1151);const i={sidebar_position:2},s="Page Object",c={id:"Guides/page-object",title:"Page Object",description:"Framework provides capability to call getElement method from po object that resolves plain-english selector and return element or array of elements.",source:"@site/docs/Guides/page-object.md",sourceDirName:"Guides",slug:"/Guides/page-object",permalink:"/docs/Guides/page-object",draft:!1,unlisted:!1,editUrl:"https://github.com/qavajs/qavajs.github.io/tree/main/docs/Guides/page-object.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Memory",permalink:"/docs/Guides/memory"},next:{title:"Composing Steps",permalink:"/docs/Guides/composing-steps"}},l={},a=[{value:"Create page object",id:"create-page-object",level:2},{value:"Working with collection",id:"working-with-collection",level:2},{value:"Ignore hierarchy",id:"ignore-hierarchy",level:2},{value:"Optional selector property",id:"optional-selector-property",level:2},{value:"Immediate option",id:"immediate-option",level:2},{value:"Dynamic selectors",id:"dynamic-selectors",level:2},{value:"Native framework selectors",id:"native-framework-selectors",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"page-object",children:"Page Object"}),"\n",(0,o.jsx)(n.p,{children:"Framework provides capability to call getElement method from po object that resolves plain-english selector and return element or array of elements."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const { po } = require('@qavajs/po');\n\nWhen(/^click '(.+)'$/, async function (alias) {\n    const element = await po.getElement(alias);\n    await element.waitForClickable();\n    await element.click();\n});\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When click '#1 of Multiple Component > Child Item'\n"})}),"\n",(0,o.jsx)(n.p,{children:"Framework provides capability to get single element from collection by index (#index of Collection) or inner text (#text in Collection)."}),"\n",(0,o.jsx)(n.h2,{id:"create-page-object",children:"Create page object"}),"\n",(0,o.jsx)(n.p,{children:"There are two methods $ and $$ that allow registering elements and collections.\nAn element can be defined as supported selector or as an instance of the component class."}),"\n",(0,o.jsx)(n.p,{children:"Each not top-level component should have selector property or be inherited from Component class and accepted selector in constructor."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"/**\n *  import po depending to selected driver\n *  wdio - @qavajs/po\n *  playwright - @qavajs/po-playwright\n *  testcafe - @qavajs/po-testcafe\n */\nconst { $, $$, Component } = require('@qavajs/po');\n\nclass MultipleComponent extends Component {\n    ChildItem = $('div');\n}\n\nclass SingleComponent {\n    selector = '.container';\n    ChildItem = $('.child-item');\n}\n\nclass App {\n    SingleElement = $('.single-element');\n    List = $$('.list li');\n    SingleComponent = $(new SingleComponent());\n    MultipleComponents = $$(new MultipleComponent('.list-components li'));\n}\n\nmodule.exports = new App();\n"})}),"\n",(0,o.jsx)(n.h2,{id:"working-with-collection",children:"Working with collection"}),"\n",(0,o.jsx)(n.p,{children:"Collection elements can be accessed using prefixes"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"By index:"})," ",(0,o.jsx)(n.code,{children:"#\\{index} of Collection"})," (access 1st element in collection)"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When I click '#1 of Collection'\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"By partial text:"})," ",(0,o.jsx)(n.code,{children:"#\\{text} in Collection"})," (access first element which text contains {text})"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When I click '#some partial text in Collection'\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"By exact text:"})," ",(0,o.jsx)(n.code,{children:"@\\{text} in Collection"})," (access first element which text exactly match {text})"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When I click '@some exact text in Collection'\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"By regexp:"})," ",(0,o.jsx)(n.code,{children:"/\\{regexp}/ in Collection"})," (access first element which text match {regexp} regexp)"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When I click '/^some regexp$/ in Collection'\n"})}),"\n",(0,o.jsx)(n.h2,{id:"ignore-hierarchy",children:"Ignore hierarchy"}),"\n",(0,o.jsxs)(n.p,{children:["In case if child element and parent component doesn't have hierarchy dependency\nit's possible to pass extra parameter ",(0,o.jsx)(n.em,{children:"ignoreHierarchy"})," parameter to start traverse from root"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"class ComponentThatDescribesNotWellDesignedDOMTree {\n    selector = '.container';\n    //ignoreHierarchy will ignore component selector .container and start traverse from root\n    ChildItem = $('.child-item', { ignoreHierarchy: true }); \n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"optional-selector-property",children:"Optional selector property"}),"\n",(0,o.jsx)(n.p,{children:"If selector property is not provided for Component then parent element will be returned"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"class ParentComponent {\n    selector = '.container';\n    ChildComponent = $(new ChildComponent()); \n}\n\nclass ChildComponent {\n    //Element will be searched in parent .container element\n    Element = $('.someElement');\n}\n"})}),"\n",(0,o.jsx)(n.h2,{id:"immediate-option",children:"Immediate option"}),"\n",(0,o.jsxs)(n.p,{children:["In order, you don't need to retry query for elements exists you can pass ",(0,o.jsx)(n.code,{children:"{ immediate: true }"})," option"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"When('I wait \\{string} not to be present', async function (alias) {\n    const element = await po.getElement(alias, { immediate: true }); // in case if element not found dummy not existing element be returned\n    await element.waitForExist({ reverse: true });\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"dynamic-selectors",children:"Dynamic selectors"}),"\n",(0,o.jsx)(n.p,{children:"In case you need to generate selector based on some data you can use dynamic selectors"}),"\n",(0,o.jsx)(n.p,{children:"e.g"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const { Selector } = require('@qavajs/po');\n\nclass Component {\n    selector = '.container';\n    Element = $(Selector((index => `div:nth-child($\\{index})`))); // function should return valid selector \n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"Then you can pass parameter to this function from Gherkin file"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-gherkin",children:"When I click 'Component > Element (2)'\n"})}),"\n",(0,o.jsx)(n.h2,{id:"native-framework-selectors",children:"Native framework selectors"}),"\n",(0,o.jsxs)(n.p,{children:["It is also possible to use driver-built capabilities to return element. You can pass handler that has access to\ncurrent ",(0,o.jsx)(n.code,{children:"page"})," (or ",(0,o.jsx)(n.code,{children:"browser"})," in wdio) object."]}),"\n",(0,o.jsx)(n.p,{children:"Playwright example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const { NativeSelector } = require('@qavajs/po-playwright');\n\nclass Component {\n    selector = '.container';\n    Element = $(NativeSelector(page => page.getByText(`some text`))); \n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"WDIO example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"const { NativeSelector } = require('@qavajs/po');\n\nclass Component {\n    selector = '.container';\n    Element = $(NativeSelector(browser => browser.$('.single-element'))); \n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>s});var o=t(7294);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);